<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <title>Contact Karina Kvych</title>
    <link rel="icon" type="image/x-icon" href="img/download.jpg" />
    <link href="styles/contact.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oxygen:wght@300;400&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Anton&family=Oxygen:wght@300;400&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/5cfafcc03b.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-transparent">
        <a class="navbar-brand" href="index.html"
          ><strong>
            <i class="fa-solid fa-compass"></i>
            Karina Kvych</strong
          >
          / <em>Junior Web Developer</em></a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbarNav"
        >
          <ul class="navbar-nav m-3">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">About me</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="cv.html">Cv</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="projects.html">Projects</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <main class="d-flex flex-column justify-content-center">
      <div class="container">
        <div class="content">
          <div class="form">
            <h1 class="topic-text">Let's get in touch</h1>
            <form class="m-2" id="form">
              <div class="m-2">
                <input
                  type="text"
                  class="form-control value"
                  placeholder="Name"
                  id="name"
                  required
                />
              </div>
              <div class="m-2">
                <input
                  type="email"
                  class="form-control value"
                  placeholder="Email address"
                  id="emailAddress"
                  required
                />
              </div>
              <div class="m-2">
                <textarea
                  class="form-control value"
                  rows="4"
                  required
                  id="text"
                ></textarea>
              </div>
              <button type="submit" id="submitButton" class="subButton">
                <i class="fa-regular fa-paper-plane"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-4">
            <a
              href="https://www.linkedin.com/in/karina-kvych-036958216/"
              target="_blank"
              ><i
                class="fa-brands fa-linkedin fa-2xl"
                style="color: #ecd44b"
              ></i
            ></a>
          </div>
          <div class="col-4">
            <i class="fa-solid fa-list-check fa-2xl" style="color: #0d111c"></i>
          </div>
          <div class="col-4">
            <a href="https://github.com/karin0chka" target="_blank"
              ><i class="fa-brands fa-github fa-2xl" style="color: #527fcb"></i
            ></a>
          </div>
        </div>
      </div>
    </footer>
    <script>
      document
        .getElementById("form")
        .addEventListener("submit", async function (e) {
          e.preventDefault();
          const button = document.getElementById("submitButton");
          button.classList.remove("subButton");
          button.classList.add("loader");
          setTimeout(async function () {
            const name = document.getElementById("name").value;
            const emailAddress = document.getElementById("emailAddress").value;
            const text = document.getElementById("text").value;
            const botToken = "5685011090:AAF3_iLIlZLWcdHf0qrtkHons4MfbIO0EtY";
            const channelChatId = "-970116995";
            const message = `Name: ${name};\n Email: ${emailAddress}; \n Massage: ${text}`;
            try {
              const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
              const payload = {
                chat_id: channelChatId,
                text: message,
              };

              const response = await fetch(url, {
                method: "POST",
                headers: { "content-type": "application/json" },
                body: JSON.stringify(payload),
              });

              if (response.ok) {
               
                document.getElementById("name").value = "";
                document.getElementById("emailAddress").value = "";
                document.getElementById("text").value = "";

                button.classList.remove("loader");
                button.classList.add("success");
                setTimeout(function(){
                  button.classList.remove("success")
                  button.classList.add("subButton")
                },2000)
              } else {
                throw new Error("Error sending message");
                button.classList.remove("loader");
                button.classList.remove("success");
              }
            } catch (error) {
              console.error("Error sending message:", error);

              alert(
                "An error occurred while submitting the form. Please try again later."
              );
            }
          }, 300);
        });
    </script>
  </body>
</html>
